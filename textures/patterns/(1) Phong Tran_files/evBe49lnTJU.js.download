if (self.CavalryLogger) { CavalryLogger.start_js(["FN4II"]); }

__d('FeedTagSuggest',['ArbiterMixin','AsyncRequest','CSS','Event','mixin','SubscriptionsHandler'],(function a(b,c,d,e,f,g){var h,i;h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l,m,n,o,p,q,r,s,t){'use strict';i.constructor.call(this);this.suggest=k;this.$FeedTagSuggest1=q;this.$FeedTagSuggest2=r;this.$FeedTagSuggest3=s;this.$FeedTagSuggest4=l;this.$FeedTagSuggest5=p;this.$FeedTagSuggest6=o;this.$FeedTagSuggest7=m;this.$FeedTagSuggest8=n;this.$FeedTagSuggest9=t;this.$FeedTagSuggest10=new (c('SubscriptionsHandler'))();this.$FeedTagSuggest10.addSubscriptions(c('Event').listen(this.$FeedTagSuggest5,'click',this.dismissSuggestion.bind(this,'no')),c('Event').listen(this.$FeedTagSuggest6,'click',this.acceptTagSuggestion.bind(this)));if(this.$FeedTagSuggest4)this.$FeedTagSuggest10.addSubscriptions(c('Event').listen(this.$FeedTagSuggest4,'click',this.dismissSuggestion.bind(this,'close')));}j.prototype.dismissSuggestion=function(k){'use strict';var l=this.$FeedTagSuggest9.feed_type;new (c('AsyncRequest'))().setURI('/ajax/dismiss_tag_suggest.php').setMethod('POST').setData({facebox_logs:[{facebox:this.$FeedTagSuggest2,log_data:this.$FeedTagSuggest9}],closing_source:l,closing_action:k}).setAllowCrossPageTransition(true).send();this.inform('remove');};j.prototype.tagSaveSuccess=function(k){'use strict';this.inform('remove');};j.prototype.acceptTagSuggestion=function(){'use strict';new (c('AsyncRequest'))().setURI('/ajax/photo_feed_tagging_ajax.php').setMethod('POST').setData({photo_id:this.$FeedTagSuggest1,facebox_id:this.$FeedTagSuggest2,subject_id:this.$FeedTagSuggest3,log_data:this.$FeedTagSuggest9}).setErrorHandler(this.dismissSuggestion.bind(this,'err')).setAllowCrossPageTransition(true).setHandler(this.tagSaveSuccess.bind(this)).send();if(this.$FeedTagSuggest8){c('CSS').hide(this.$FeedTagSuggest7);c('CSS').show(this.$FeedTagSuggest8);}};j.prototype.cleanup=function(){'use strict';this.$FeedTagSuggest10.release();};f.exports=j;}),null);
__d('LitestandTagSuggestContainer',['cx','csx','invariant','Animation','CSS','DOM','DOMQuery','Event','JSXDOM','Rect','SubscriptionsHandler','Style'],(function a(b,c,d,e,f,g,h,i,j){var k=15;function l(m,n,o,p){'use strict';this.$LitestandTagSuggestContainer1=new (c('SubscriptionsHandler'))();this.$LitestandTagSuggestContainer1.engage();this.$LitestandTagSuggestContainer2=m;this.$LitestandTagSuggestContainer3=o;this.$LitestandTagSuggestContainer4=p;c('CSS').show(this.$LitestandTagSuggestContainer2);var q=new (c('Rect'))(o).w(),r=c('DOMQuery').scry(m,"._5cne"),s=0;for(var t=0;t<r.length;t++){c('CSS').show(r[t]);var u=new (c('Rect'))(r[t].children[0]).w();if(t>0)c('CSS').hide(r[t]);if(u>s)s=u;}if(s+k>q){c('CSS').hide(m);return;}this.$LitestandTagSuggestContainer5=[];this.$LitestandTagSuggestContainer6=false;n.forEach(this.registerSuggestion.bind(this));this.$LitestandTagSuggestContainer1.addSubscriptions(c('Event').listen(this.$LitestandTagSuggestContainer2,'mouseenter',this.$LitestandTagSuggestContainer7.bind(this)),c('Event').listen(this.$LitestandTagSuggestContainer2,'mouseleave',this.$LitestandTagSuggestContainer8.bind(this)));}l.prototype.registerSuggestion=function(m){'use strict';this.$LitestandTagSuggestContainer5.push(m);var n=m.js_instance;this.$LitestandTagSuggestContainer1.addSubscriptions(n.subscribe('remove',this.onRemove.bind(this,n)));};l.prototype.$LitestandTagSuggestContainer9=function(m){'use strict';if(!this.$LitestandTagSuggestContainer10){var n=this.$LitestandTagSuggestContainer3.children[0];this.$LitestandTagSuggestContainer11={top:parseInt(c('Style').get(n,'top'),10)||0,left:parseInt(c('Style').get(n,'left'),10)||0,inner_h:parseInt(c('Style').get(n,'height'),10),inner_w:parseInt(c('Style').get(n,'width'),10),outer_h:parseInt(c('Style').get(this.$LitestandTagSuggestContainer3,'height'),10),outer_w:parseInt(c('Style').get(this.$LitestandTagSuggestContainer3,'width'),10)};}var o=this.$LitestandTagSuggestContainer11,p=100*(m.top*o.inner_h/100+o.top)/o.outer_h,q=100*(m.left*o.inner_w/100+o.left)/o.outer_w,r=m.width*o.inner_w/o.outer_w,s=m.height*o.inner_h/o.outer_h;return c('JSXDOM').div({className:"_5cnc hidden_elem",style:{top:p+'%',left:q+'%',width:r+'%',height:s+'%'}});};l.prototype.onRemove=function(m){'use strict';var n=this.$LitestandTagSuggestContainer5.shift();this.$LitestandTagSuggestContainer8();n.js_instance===m||j(0);if(this.$LitestandTagSuggestContainer5.length===0){new (c('Animation'))(this.$LitestandTagSuggestContainer2).ondone(function(){this.removeSingleSuggest(this.$LitestandTagSuggestContainer2);}.bind(this)).from('opacity',1).to('opacity',0).ease(c('Animation').ease.end).duration(500).go();this.cleanup();}else new (c('Animation'))(m.suggest).ondone(function(){this.switchToNextSuggest(m.suggest,this.getNextFacebox().suggest);}.bind(this)).from('opacity',1).to('opacity',0).ease(c('Animation').ease.end).duration(500).go();};l.prototype.switchToNextSuggest=function(m,n){'use strict';c('CSS').show(n);new (c('Animation'))(n).ondone(this.removeSingleSuggest.bind(this,m)).from('opacity',0).to('opacity',1).ease(c('Animation').ease.end).duration(500).go();};l.prototype.removeSingleSuggest=function(m){'use strict';c('DOM').remove(m);m.cleanup();};l.prototype.getNextFacebox=function(){'use strict';return this.$LitestandTagSuggestContainer5[0].js_instance;};l.prototype.$LitestandTagSuggestContainer7=function(){'use strict';if(!this.$LitestandTagSuggestContainer6){this.$LitestandTagSuggestContainer6=true;this.$LitestandTagSuggestContainer5.forEach(function(m,n,o){var p=this.$LitestandTagSuggestContainer9(m.position_data);c('DOM').appendContent(this.$LitestandTagSuggestContainer3,p);o[n].dom_element=p;}.bind(this));}this.$LitestandTagSuggestContainer12=this.$LitestandTagSuggestContainer5[0].dom_element;c('CSS').show(this.$LitestandTagSuggestContainer12);};l.prototype.$LitestandTagSuggestContainer8=function(){'use strict';this.$LitestandTagSuggestContainer12&&c('CSS').hide(this.$LitestandTagSuggestContainer12);this.$LitestandTagSuggestContainer12=null;};l.prototype.cleanup=function(){'use strict';this.$LitestandTagSuggestContainer1.release();};f.exports=l;}),null);